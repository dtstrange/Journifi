<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>TicketMaster Data</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
</head>

<body>
    <div class="container">
        <!-- API data goes here -->
        <div id="eventsDescription"></div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function() {

        var APIKey = "1UbeVqHP9VHYsr7uCAJm0yDYCd8AS6Nr";

        var queryURL = "https://app.ticketmaster.com/discovery/v2/events.json?classificationName=sports&city=san+diego&apikey=" + APIKey;

        $.ajax({
            type: "GET",
            url: queryURL,
            async: true,
            dataType: "json",
            success: function(json) {
                console.log(json);
                //events is an array -- write loop to pull from array

                var eventsResults = json._embedded.events;

                console.log(eventsResults);

                for (var i = 0; i < eventsResults.length; i++) {

                    var eventsDiv = $("<div>");

                    var eventsName = $("<p>").html(`<h2>${eventsResults[i].name}</h2>`);
                    var eventsImg = $("<img>").attr("src", eventsResults[i].images[0].url);
                    var eventsDate = $("<p>").html(eventsResults[i].dates.start.dateTime);
                    var eventsURL = $("<button class='btn btn-default'>").html(`<a href ="${eventsResults[i].url}" target="_blank">More Info</a>`);
                    var hr = $('<hr />');

                    eventsDiv.append(eventsName, eventsImg, eventsDate, eventsURL, hr);
                    console.log(eventsResults[i].name);
                    console.log(eventsResults[i].dates.start);

                    $("#eventsDescription").append(eventsDiv);

                }





            },
            error: function(xhr, status, err) {
                // This time, we do not end up here!
            }
        });



    });
    </script>
</body>

</html>